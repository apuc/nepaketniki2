"use strict";var _createClass=function(){function s(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,n,t){return n&&s(e.prototype,n),t&&s(e,t),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Shared=function e(){_classCallCheck(this,e)},BASE_URL=window.location.origin,Slider=function(){function d(e){var n=e.currentPageBlockId,t=e.pagesBlockId,s=e.prevPageButtonId,r=e.nextPageButtonId,i=e.elementsListId,a=e.getLink,o=e.parser,l=e.filter,c=e.sorter,u=e.renderInner,m=e.elementClass;_classCallCheck(this,d),this.currentPage=1,this.pages=1,this.sliding=!1,this.pageHasDifferences=null,this.currentPageBlock=document.getElementById(n),this.pagesBlock=document.getElementById(t),this.prevPageButton=document.getElementById(s),this.nextPageButton=document.getElementById(r),this.elementsList=document.getElementById(i),this.elements=[],this.visibleElements=[],this.request=null,this.url=null,this.getLink=a,this.parser=o,this.filter=l,this.sorter=c,this.renderInner=u,this.elementClass=m}return _createClass(d,[{key:"addListeners",value:function(){this.prevPageButton.addEventListener("click",this.prevPage.bind(this)),this.nextPageButton.addEventListener("click",this.nextPage.bind(this))}},{key:"createRequest",value:function(){var t=this;this.request=new XMLHttpRequest,this.url=BASE_URL+"/"+this.getLink(),this.request.open("GET",this.url),this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),this.request.addEventListener("readystatechange",function(){var e;4===t.request.readyState&&200===t.request.status&&(t.elements=JSON.parse(t.request.response),t.parser&&(t.elements=t.elements.map(t.parser)),t.filter&&(t.elements=t.elements.filter(t.filter)),t.sorter&&(t.elements=t.elements.sort(t.sorter)),t.pages=0<Math.ceil(t.elements.length/3)?Math.ceil(t.elements.length/3):1,t.pagesBlock&&(t.pagesBlock.innerHTML=t.pages),t.elements.length<3*t.pages&&(e=3*t.pages-t.elements.length,t.pageHasDifferences=t.pages,t.elements=[].concat(_toConsumableArray(t.elements),_toConsumableArray(Array.from(Array(e),function(e){return{}})))),t.visibleElements=t.elements.slice(3*t.currentPage-3,3*t.currentPage),t.visibleElements.forEach(function(e,n){return t.renderElement(e,n,t.currentPage,t.pageHasDifferences)}))})}},{key:"makeRequest",value:function(){this.request.send(),this.currentPageBlock&&this.pagesBlock&&(this.currentPageBlock.innerHTML=this.currentPage,this.pagesBlock.innerHTML=this.pages)}},{key:"prevPage",value:function(){var e,t=this;0<this.currentPage-1&&!this.sliding&&(this.sliding=!0,(e=document.querySelectorAll("."+this.elementClass+':not([style*="display: none"])')).forEach(function(e){return e.classList.toggle("fading-prev")}),setTimeout(function(){e.forEach(function(e){return e.classList.toggle("fading-prev")}),e.forEach(function(e){return e.style.display="none"}),--t.currentPage,t.currentPageBlock&&(t.currentPageBlock.innerHTML=t.currentPage),t.visibleElements=t.elements.slice(3*t.currentPage-3,3*t.currentPage),t.visibleElements.forEach(function(e,n){return t.renderElement(e,n,t.currentPage,t.pageHasDifferences)}),(e=document.querySelectorAll("."+t.elementClass+':not([style*="display: none"])')).forEach(function(e){return e.classList.toggle("appearing-prev")}),t.sliding=!1,setTimeout(function(){e.forEach(function(e){return e.classList.toggle("appearing-prev")})},300)},300))}},{key:"nextPage",value:function(){var e,t=this;this.currentPage+1<=this.pages&&!this.sliding&&(this.sliding=!0,(e=document.querySelectorAll("."+this.elementClass+':not([style*="display: none"])')).forEach(function(e){return e.classList.toggle("fading-next")}),setTimeout(function(){e.forEach(function(e){return e.classList.toggle("fading-next")}),e.forEach(function(e){return e.style.display="none"}),t.currentPage+=1,t.currentPageBlock&&(t.currentPageBlock.innerHTML=t.currentPage),t.visibleElements=t.elements.slice(3*t.currentPage-3,3*t.currentPage),t.visibleElements.forEach(function(e,n){return t.renderElement(e,n,t.currentPage,t.pageHasDifferences)}),(e=document.querySelectorAll("."+t.elementClass+':not([style*="display: none"])')).forEach(function(e){return e.classList.toggle("appearing-next")}),t.sliding=!1,setTimeout(function(){e.forEach(function(e){return e.classList.toggle("appearing-next")})},300)},300))}},{key:"renderElement",value:function(e,n,t,s){var r=this.renderInner(e,n,t,s);this.elementsList.innerHTML+=r}}]),d}();function getLink(){var e=window.location.href.split("/");return"tour/plan_photos/"+e[e.length-1]}function createSliders(){var r=new XMLHttpRequest,e=BASE_URL+"/"+getLink();r.open("GET",e),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.addEventListener("readystatechange",function(){var e,n,t,s;4===r.readyState&&200===r.status&&(e=JSON.parse(r.response).map(function(e){return e.day}),n=Math.max.apply(Math,e),t=Array.from(Array(n),function(e,n){return n+1}),s=Array.from(Array(t),function(e){return{}}),t.map(function(e){s[e-1]=new Slider(getSliderProps(e))}),s.map(function(e){e.createRequest(),e.addListeners(),e.makeRequest()}))}),r.send()}function getSliderProps(s){return{prevPageButtonId:"singleTourPlanPrevPage-"+s,nextPageButtonId:"singleTourPlanNextPage-"+s,elementsListId:"singleTourPlanPhotos-"+s,getLink:getLink,renderInner:function(e,n){if(!e.image)return"";var t="";return 1<n&&(0!==t.length&&(t+=" "),t+="mobile-hidden"),"\n                <div class='-single-tour-plan-item__photos-item -single-tour-plan-item__photos-item-"+s+"'>\n                    <img src='"+e.image+"' alt=\"\" class='.-single-tour-plan-item__photo' />\n                </div>\n                "},filter:function(e){return e.day===s},elementClass:"-single-tour-plan-item__photos-item-"+s}}function renderComment(e,n,t,s){if(!e.name)return"";var r="";n%3!=0&&(0!==r.length&&(r+=" "),r+="mobile-hidden"),n%3!=1&&t!==s&&(0!==r.length&&(r+=" "),r+="upper");for(var i="",a=0;a<e.instagramLinks.length;a++){var o=e.instagramLinks[a],l="http::/instagram.com/"+o;i+=0===n?"\n                <a class='comment__link' href="+l+">"+o+"</a>\n            ":"\n                <span class='comment__link-breaker'>|</span>\n                <a class='comment__link' href="+l+">"+o+"</a>\n            "}return"\n        <div class='comments-comment "+r+"'>\n            <div class='comments-comment__border-inside'></div>\n            <div class='comment__main'>\n                <h4 class='comment__name'>"+e.name+"</h4>\n                <div class='comment__instagram'>\n                    <i class='fa fa-instagram'></i>\n                    "+i+"\n                </div>\n                <p class='comment__text'>\n                    "+e.text+"\n                </p>\n            </div>\n            <img class='comment__avatar' src="+e.avatar+" alt='' />\n        </div>\n    "}function createCommentsSlider(){var e=new Slider({currentPageBlockId:"commentsCurrentPage",pagesBlockId:"commentsPages",prevPageButtonId:"commentsPrevPage",nextPageButtonId:"commentsNextPage",elementsListId:"commentsList",getLink:function(){return"reviews_download"},parser:function(e){return e.instagramLinks=e.instagramLinks.split(", "),e},filter:function(e){ return window.location.href.indexOf("/tour/")===-1||window.location.href.indexOf("/tour/"+e.tour_id)!==-1},sorter:function(e,n){return n.priority-e.priority},renderInner:renderComment,elementClass:"comments-comment"});e.createRequest(),e.addListeners(),e.makeRequest()}document.addEventListener("DOMContentLoaded",function(){-1!==window.location.href.indexOf("/tour/")&&createSliders(),createCommentsSlider()});var menu=document.getElementById("menu"),menuIcon=document.getElementById("menuIcon"),menuList=document.getElementById("menuList"),menuNav=document.getElementById("headerNavInfo"),menuIsOpened=!1,menuListIsOpened=!1;function openList(e){menuListIsOpened=!0,menuList.style.display="block",e&&(menu.classList.toggle("menu--opened"),menuIcon.classList.toggle("icon--opened"))}function closeList(e){menuListIsOpened=!1,menuList.style.display="none",e&&(menu.classList.toggle("menu--opened"),menuIcon.classList.toggle("icon--opened"))}function openMenu(){menu.style.display="block",menuNav.style.display="none",menuIsOpened=!0}function closeMenu(e){menu.style.display="none",menuNav.style.display="flex",menuIsOpened=!1,closeList(e)}document.addEventListener("DOMContentLoaded",function(){676<window.innerWidth?closeMenu(!1):(menu.style.display="block",menuNav.style.display="none",closeList(!(menuIsOpened=!0)))}),window.addEventListener("resize",function(){menuIsOpened&&676<window.innerWidth?closeMenu(menuListIsOpened):!menuIsOpened&&window.innerWidth<=676&&openMenu()}),menuIcon.addEventListener("click",function(){(menuListIsOpened?closeList:openList)(!0)}),menuList.addEventListener("click",function(){closeList(!0)});
//# sourceMappingURL=script.js.map
