{"version":3,"sources":["script.js","comments/comments.js","menu/menu.js"],"names":["Shared","_classCallCheck","this","BASE_URL","currentPage","pages","sliding","pageHasDifferences","currentPageBlock","document","getElementById","pagesBlock","prevPageButton","nextPageButton","commentsList","comments","visibleComments","request","XMLHttpRequest","url","prevPage","commentBlocks","querySelectorAll","forEach","block","classList","toggle","setTimeout","style","display","innerHTML","slice","comment","index","renderComment","nextPage","name","classes","length","linksInner","i","instagramLinks","link","resultLink","resultInner","text","avatar","open","setRequestHeader","addEventListener","commentsLeft","readyState","status","JSON","parse","response","map","split","Math","ceil","_toConsumableArray","Array","from","_","send","menu","menuIcon","menuList","menuNav","menuIsOpened","menuListIsOpened","openList","mode","closeList","openMenu","closeMenu","window","innerWidth"],"mappings":"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","file":"script.js","sourcesContent":["class Shared {\r\n    constructor() {}\r\n}\r\n\r\nconst BASE_URL = 'http://nepaketniki2';","var currentPage = 1;\r\nvar pages = 1;\r\nvar sliding = false;\r\nvar pageHasDifferences = null;\r\n\r\nvar currentPageBlock = document.getElementById('currentPage');\r\nvar pagesBlock = document.getElementById('pages');\r\n\r\nvar prevPageButton = document.getElementById('prevPage');\r\nvar nextPageButton = document.getElementById('nextPage');\r\n\r\nvar commentsList = document.getElementById('commentsList');\r\n\r\nlet comments = [];\r\nlet visibleComments = [];\r\n\r\nconst request = new XMLHttpRequest();\r\n\r\nconst url = `${BASE_URL}/review_download`;\r\nrequest.open('GET', url);\r\nrequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n\r\nrequest.addEventListener(\"readystatechange\", () => {\r\n    if (request.readyState === 4 && request.status === 200) {\r\n        comments = JSON.parse(request.response);\r\n        comments.map(comment => {\r\n            comment.instagramLinks = comment.instagramLinks.split(', ');\r\n            return comment;            \r\n        });\r\n        pages = Math.ceil(comments.length / 3) > 0 ? Math.ceil(comments.length / 3) : 1;\r\n        pagesBlock.innerHTML = pages;\r\n        if(comments.length < pages*3) {\r\n            const commentsLeft = pages*3-comments.length;\r\n            pageHasDifferences = pages;\r\n            comments = [...comments, ...Array.from(Array(commentsLeft), (_) => { return {} })];\r\n        }\r\n        visibleComments = comments.slice(currentPage*3-3, currentPage*3);\r\n        visibleComments.forEach((comment,index) => renderComment(comment, index));\r\n    };\r\n}); \r\n\r\nrequest.send(); \r\n\r\ncurrentPageBlock.innerHTML = currentPage;\r\npagesBlock.innerHTML = pages;\r\n\r\n\r\nfunction prevPage() {\r\n    if(currentPage-1 > 0 && !sliding) {\r\n        sliding = true;\r\n        \r\n        let commentBlocks = document.querySelectorAll('.comments-comment:not([style*=\"display: none\"])');\r\n        commentBlocks.forEach(block => block.classList.toggle('fading-prev'));\r\n\r\n        setTimeout( () => {\r\n            commentBlocks.forEach(block => block.classList.toggle('fading-prev'));\r\n            commentBlocks.forEach(block => block.style.display='none');\r\n            currentPage -= 1;\r\n            currentPageBlock.innerHTML = currentPage;\r\n            let visibleComments = comments.slice(currentPage*3-3, currentPage*3);\r\n            visibleComments.forEach((comment,index) => renderComment(comment, index));\r\n\r\n            commentBlocks = document.querySelectorAll('.comments-comment:not([style*=\"display: none\"])');\r\n            commentBlocks.forEach(block => block.classList.toggle('appearing-prev'));\r\n            sliding = false;\r\n            setTimeout( () => {\r\n                commentBlocks.forEach(block => block.classList.toggle('appearing-prev'));\r\n            }, 300);\r\n        }, 300);\r\n    };\r\n};\r\n\r\nfunction nextPage() {\r\n    if(currentPage + 1 <= pages && !sliding) {\r\n        sliding = true;\r\n        \r\n        let commentBlocks = document.querySelectorAll('.comments-comment:not([style*=\"display: none\"])');\r\n        commentBlocks.forEach(block => block.classList.toggle('fading-next'));\r\n\r\n        setTimeout( () => {\r\n            commentBlocks.forEach(block => block.classList.toggle('fading-next'));\r\n            commentBlocks.forEach(block => block.style.display='none');\r\n            currentPage += 1;\r\n            currentPageBlock.innerHTML = currentPage;\r\n            let visibleComments = comments.slice(currentPage*3-3, currentPage*3);\r\n            visibleComments.forEach((comment,index) => renderComment(comment, index));\r\n\r\n            commentBlocks = document.querySelectorAll('.comments-comment:not([style*=\"display: none\"])');\r\n            commentBlocks.forEach(block => block.classList.toggle('appearing-next'));\r\n            sliding = false;\r\n            setTimeout( () => {\r\n                commentBlocks.forEach(block => block.classList.toggle('appearing-next'));\r\n            }, 300);\r\n        }, 300);\r\n    };\r\n};\r\n\r\nfunction renderComment(comment, index) {\r\n    if(!comment.name) {\r\n        return;\r\n    }\r\n    var classes = ''\r\n    if( index%3 !== 0) {\r\n        if(classes.length !== 0) \r\n            classes += ' '\r\n        classes += 'mobile-hidden'\r\n    };\r\n    if( index%3 !== 1 && currentPage !== pageHasDifferences) {\r\n        if(classes.length !== 0) \r\n            classes += ' '\r\n        classes += 'upper'\r\n    };\r\n\r\n    let linksInner = '';\r\n    for(let i = 0; i < comment.instagramLinks.length; i++) {\r\n        let link = comment.instagramLinks[i];\r\n        var resultLink = 'http::/instagram.com/' + link;\r\n        if(index === 0) {\r\n            linksInner += `\r\n                <a class='comment__link' href=${resultLink}>${link}</a>\r\n            `;\r\n        } else\r\n            linksInner += `\r\n                <span class='comment__link-breaker'>|</span>\r\n                <a class='comment__link' href=${resultLink}>${link}</a>\r\n            `;\r\n        };\r\n\r\n    let resultInner = `\r\n        <div class='comments-comment ${classes}'>\r\n            <div class='comments-comment__border-inside'></div>\r\n            <div class='comment__main'>\r\n                <h4 class='comment__name'>${comment.name}</h4>\r\n                <div class='comment__instagram'>\r\n                    <i class='fa fa-instagram'></i>\r\n                    ${linksInner}\r\n                </div>\r\n                <p class='comment__text'>\r\n                    ${comment.text}\r\n                </p>\r\n            </div>\r\n            <img class='comment__avatar' src=${comment.avatar} alt='' />\r\n        </div>\r\n    `;\r\n\r\n    commentsList.innerHTML += resultInner;\r\n}\r\n\r\n\r\nprevPageButton.addEventListener('click', prevPage);\r\nnextPageButton.addEventListener('click', nextPage);","var menu = document.getElementById('menu');\r\nvar menuIcon = document.getElementById('menuIcon');\r\nvar menuList = document.getElementById('menuList');\r\nvar menuNav = document.getElementById('headerNavInfo');\r\n\r\nvar menuIsOpened = false\r\nvar menuListIsOpened = false;\r\n\r\nfunction openList(mode) {\r\n    menuListIsOpened = true;\r\n    menuList.style.display = 'block';\r\n    if(mode) {\r\n        menu.classList.toggle('menu--opened');\r\n        menuIcon.classList.toggle('icon--opened');\r\n    }\r\n}\r\n\r\nfunction closeList(mode) {\r\n    menuListIsOpened = false;\r\n    menuList.style.display = 'none';\r\n    if(mode) {\r\n        menu.classList.toggle('menu--opened');\r\n        menuIcon.classList.toggle('icon--opened');\r\n    }\r\n}\r\n\r\nfunction openMenu() {\r\n    menu.style.display = 'block';\r\n    menuNav.style.display = 'none';\r\n    menuIsOpened = true;\r\n}\r\n\r\nfunction closeMenu(mode) {\r\n    menu.style.display = 'none';\r\n    menuNav.style.display = 'flex';\r\n    menuIsOpened = false;\r\n    closeList(mode);\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    if(window.innerWidth > 676) {\r\n        closeMenu(false)\r\n    } else {\r\n        menu.style.display = 'block';\r\n        menuNav.style.display = 'none';\r\n        menuIsOpened = true;\r\n        closeList(false);\r\n    }\r\n})\r\n\r\nwindow.addEventListener('resize', () => {\r\n    if(menuIsOpened && window.innerWidth > 676) {\r\n        closeMenu(menuListIsOpened)\r\n    } else if (!menuIsOpened && window.innerWidth <= 676) {\r\n        openMenu()\r\n    }\r\n})\r\n\r\nmenuIcon.addEventListener('click', () => {\r\n    if(menuListIsOpened) {\r\n        closeList(true)\r\n    } else {\r\n        openList(true)\r\n    }\r\n})\r\n\r\nmenuList.addEventListener('click', () => {\r\n    closeList(true)\r\n})"]}